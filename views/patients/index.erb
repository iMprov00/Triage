<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="h2 mb-0">
    <i class="bi bi-people-fill text-primary me-2"></i>
    Список пациентов
  </h1>
  <a href="/patients/new" class="btn btn-primary">
    <i class="bi bi-person-plus-fill me-2"></i>
    Новый пациент
  </a>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <% if @patients.any? %>
      <div class="table-responsive">
        <table class="table table-hover">
          <thead class="table-light">
            <tr>
              <th>ФИО</th>
              <th>Дата рождения</th>
              <th>Дата поступления</th>
              <th>Обследования</th>
              <th class="text-end">Действия</th>
            </tr>
          </thead>
          <tbody>
            <% @patients.each do |patient| %>
              <tr class="align-middle">
                <td>
                  <strong><%= "#{patient.last_name} #{patient.first_name} #{patient.middle_name}" %></strong>
                </td>
                <td><%= patient.birth_date.strftime('%d.%m.%Y') if patient.birth_date %></td>
                <td><%= patient.admission_date.strftime('%d.%m.%Y %H:%M') if patient.admission_date %></td>
                <td>
                  <span class="badge bg-secondary"><%= patient.assessments.count %></span>
                </td>
                <td>
                  <div class="d-flex justify-content-end gap-2">
                    <a href="/patients/<%= patient.id %>" class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="Просмотр">
                      <i class="bi bi-eye-fill"></i>
                    </a>
                    <a href="/patients/<%= patient.id %>/edit" class="btn btn-sm btn-outline-warning" data-bs-toggle="tooltip" title="Редактировать">
                      <i class="bi bi-pencil-fill"></i>
                    </a>
                    <a href="/patients/<%= patient.id %>/assessments/new" class="btn btn-sm btn-outline-success" data-bs-toggle="tooltip" title="Добавить обследование">
                      <i class="bi bi-clipboard-plus-fill"></i>
                    </a>
                    <form action="/patients/<%= patient.id %>" method="post" class="d-inline">
                      <input type="hidden" name="_method" value="delete">
                      <button type="submit" class="btn btn-sm btn-outline-danger" data-bs-toggle="tooltip" title="Удалить" onclick="return confirm('Удалить пациента?')">
                        <i class="bi bi-trash-fill"></i>
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="text-center py-5">
        <i class="bi bi-people display-1 text-muted"></i>
        <h3 class="text-muted mt-3">Пациентов пока нет</h3>
        <p class="text-muted">Добавьте первого пациента, чтобы начать работу</p>
        <a href="/patients/new" class="btn btn-primary mt-3">
          <i class="bi bi-person-plus-fill me-2"></i>
          Добавить пациента
        </a>
      </div>
    <% end %>
  </div>
</div>